<?xml version="1.0" encoding="UTF-8"?>
<project name="te-spatial" default="jar" basedir=".">
  
  <!-- Load property overrides from user home -->
  <property file="${user.home}/${ant.project.name}.properties"/>
  <!-- provide access to OS-specific environment variables -->
  <property environment="env"/>
  <property name="env.HOSTNAME" value="${env.COMPUTERNAME}"/>
  <property file="build.properties"/>
  
  <path id="compile.classpath">
    <pathelement location="${lib.dir}/jts-1.8.0.jar"/>
  </path>

  <target name="jar" depends="compile" 
    description="Creates the JAR file for distribution.">
    <jar jarfile="${dist.dir}/${ant.project.name}.jar" 
         basedir="${build.classes.dir}" />
  </target>

  <target name="clean"
    description="Deletes all artifacts generated by the build.">
    <delete dir="${build.dir}"/>
    <delete dir="${dist.dir}"/>
  </target>
  
  <target name="javadocs" depends="compile"
    description="Generates the API documentation.">
    <mkdir dir="${javadoc.dir}"/>
    <javadoc
      destdir="${javadoc.dir}"
      sourcepath="${src.java.dir}"
      packagenames="net.sf.teamengine.spatial.*"
      source="1.5"
      overview="${docs.dir}/overview.html"
      author="true"
      version="true"
      use="true"
      nodeprecated="false" 
      nodeprecatedlist="false" 
      noindex="false" 
      nonavbar="false" 
      notree="false" 
      splitindex="false">
        <classpath refid="compile.classpath"/>
        <link href="http://java.sun.com/j2se/1.5.0/docs/api/"/>
    </javadoc>
  </target>
  
  <!-- internal targets -->
  <target name="init">
    <tstamp />
  </target>

  <target name="prepare" depends="init">
    <mkdir dir="${build.classes.dir}" />
    <mkdir dir="${dist.dir}" />
  </target>

  <target name="compile" depends="prepare">
    <javac 
      srcdir="${src.java.dir}" 
      destdir="${build.classes.dir}" 
      includeAntRuntime="yes"
      debug="${build.debug}" 
      optimize="${build.optimize}">
      <classpath refid="compile.classpath"/>
      <compilerarg compiler="javac1.5" value="-Xlint:none" />
    </javac>
  </target>
</project>